# Custom values file for deploying Wiz from ACR
# Usage: helm install wiz-integration oci://your-acr-name.azurecr.io/helm/wiz-kubernetes-integration \
#          --version 0.2.142 \
#          --namespace wiz \
#          --create-namespace \
#          --values values-acr.yaml

# Global configuration overrides for all sub-charts
global:
  # Wiz API Token (must be created separately as a Kubernetes secret)
  wizApiToken:
    secret:
      create: false
      name: wiz-api-token

  # HTTP Proxy configuration (if needed)
  httpProxyConfiguration:
    enabled: false
    create: false

  # Override image registry for ALL components
  # This applies to all sub-charts (connector, admission-controller, sensor)
  image:
    registry: your-acr-name.azurecr.io/wiz
    pullPolicy: IfNotPresent

  # ACR pull secrets for all components
  imagePullSecrets:
    - name: acr-credentials

# Wiz Kubernetes Connector configuration
wiz-kubernetes-connector:
  enabled: true
  wizApiToken:
    secret:
      create: false
      name: wiz-api-token

  # Auto-create connector in Wiz portal
  autoCreateConnector:
    clusterFlavor: AKS  # Options: AKS, EKS, GKE, OPENSHIFT, TANZU, RANCHER, etc.

  # Wiz Broker (communication layer)
  Wiz-broker:
    enabled: true

# Wiz Admission Controller configuration
wiz-admission-controller:
  enabled: true
  wizApiToken:
    secret:
      create: false
      name: wiz-api-token

  # Override admission controller image registry
  image:
    registry: your-acr-name.azurecr.io/wiz
    repository: wiz-app/wiz-admission-controller
    pullPolicy: IfNotPresent

  # ACR pull secrets
  imagePullSecrets:
    - name: acr-credentials

  # Enable Kubernetes audit logs webhook
  kubernetesAuditLogsWebhook:
    enabled: true

# Wiz Sensor configuration
wiz-sensor:
  enabled: true
  wizApiToken:
    secret:
      create: false
      name: wiz-api-token

  # Override sensor image registry
  image:
    registry: your-acr-name.azurecr.io/wiz
    repository: sensor
    # Disk scanner image also from ACR
    diskScanRepository: wiz-app/wiz-workload-scanner

  # Sensor requires pull secret (private image)
  imagePullSecret:
    required: true
    create: false
    name: acr-credentials
